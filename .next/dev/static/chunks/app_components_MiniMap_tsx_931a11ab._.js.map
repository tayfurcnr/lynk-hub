{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/kairos/catkin_ws/lynk-hub/app/components/MiniMap.tsx"],"sourcesContent":["\"use client\";\n\nimport L from \"leaflet\";\nimport { useEffect, useRef, useState } from \"react\";\nimport type { CSSProperties } from \"react\";\n\nconst DEFAULT_CENTER: [number, number] = [37.7749, -122.4194];\n\nconst DRONE_POSITION: [number, number] = [37.7766, -122.418];\n\nconst markerIcon = new L.Icon({\n  iconUrl: new URL(\"leaflet/dist/images/marker-icon.png\", import.meta.url).toString(),\n  iconRetinaUrl: new URL(\n    \"leaflet/dist/images/marker-icon-2x.png\",\n    import.meta.url\n  ).toString(),\n  shadowUrl: new URL(\"leaflet/dist/images/marker-shadow.png\", import.meta.url).toString(),\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  shadowSize: [41, 41],\n});\n\nconst droneIcon = L.divIcon({\n  className: \"drone-marker\",\n  html: `\n    <svg viewBox=\"0 0 64 64\" aria-hidden=\"true\">\n      <circle cx=\"32\" cy=\"32\" r=\"8\" />\n      <path d=\"M12 20h10l10 12-10 12H12z\" />\n      <path d=\"M52 20H42L32 32l10 12h10z\" />\n      <circle cx=\"10\" cy=\"20\" r=\"6\" />\n      <circle cx=\"54\" cy=\"20\" r=\"6\" />\n      <circle cx=\"10\" cy=\"44\" r=\"6\" />\n      <circle cx=\"54\" cy=\"44\" r=\"6\" />\n    </svg>\n  `,\n  iconSize: [38, 38],\n  iconAnchor: [19, 19],\n});\n\nexport default function MiniMap() {\n  const [tilt, setTilt] = useState(12);\n  const [scale, setScale] = useState(1.02);\n  const mapRef = useRef<L.Map | null>(null);\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const overlayRef = useRef<L.LayerGroup | null>(null);\n  const [mapReady, setMapReady] = useState(false);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n    if (mapRef.current) return;\n\n    L.Icon.Default.mergeOptions({\n      iconUrl: markerIcon.options.iconUrl,\n      iconRetinaUrl: markerIcon.options.iconRetinaUrl,\n      shadowUrl: markerIcon.options.shadowUrl,\n    });\n\n    mapRef.current = L.map(containerRef.current, {\n      center: DEFAULT_CENTER,\n      zoom: 13,\n      zoomControl: false,\n      attributionControl: false,\n      scrollWheelZoom: false,\n    });\n\n    L.tileLayer(\"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\", {\n      attribution: \"&copy; OpenStreetMap contributors &copy; CARTO\",\n    }).addTo(mapRef.current);\n\n    overlayRef.current = L.layerGroup().addTo(mapRef.current);\n\n    L.marker(DRONE_POSITION, { icon: droneIcon }).addTo(overlayRef.current!);\n\n    setMapReady(true);\n\n    return () => {\n      overlayRef.current?.clearLayers();\n      overlayRef.current = null;\n      mapRef.current?.remove();\n      mapRef.current = null;\n    };\n  }, []);\n\n  return (\n    <div\n      className=\"map-surface\"\n      style={\n        {\n          \"--map-tilt\": `${tilt}deg`,\n          \"--map-scale\": scale,\n        } as CSSProperties\n      }\n    >\n      <div className=\"leaflet-container\" ref={containerRef} />\n      {!mapReady && <div className=\"map-fallback\">Loading mapâ€¦</div>}\n\n      <div className=\"map-controls\">\n        <label>\n          Tilt\n          <input\n            type=\"range\"\n            min=\"6\"\n            max=\"18\"\n            step=\"1\"\n            value={tilt}\n            onChange={(event) => setTilt(Number(event.target.value))}\n          />\n        </label>\n        <label>\n          Depth\n          <input\n            type=\"range\"\n            min=\"0.98\"\n            max=\"1.06\"\n            step=\"0.01\"\n            value={scale}\n            onChange={(event) => setScale(Number(event.target.value))}\n          />\n        </label>\n        <button\n          type=\"button\"\n          onClick={() => {\n            setTilt(12);\n            setScale(1.02);\n          }}\n        >\n          Reset\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;;;;AAHA;;;AAMA,MAAM,iBAAmC;IAAC;IAAS,CAAC;CAAS;AAE7D,MAAM,iBAAmC;IAAC;IAAS,CAAC;CAAQ;AAE5D,MAAM,aAAa,IAAI,+JAAC,CAAC,IAAI,CAAC;IAC5B,SAAS,0IAAgE,QAAQ;IACjF,eAAe,6IAGb,QAAQ;IACV,WAAW,4IAAkE,QAAQ;IACrF,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;IACpB,YAAY;QAAC;QAAI;KAAG;AACtB;AAEA,MAAM,YAAY,+JAAC,CAAC,OAAO,CAAC;IAC1B,WAAW;IACX,MAAM,CAAC;;;;;;;;;;EAUP,CAAC;IACD,UAAU;QAAC;QAAI;KAAG;IAClB,YAAY;QAAC;QAAI;KAAG;AACtB;AAEe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,SAAS,IAAA,uKAAM,EAAe;IACpC,MAAM,eAAe,IAAA,uKAAM,EAAwB;IACnD,MAAM,aAAa,IAAA,uKAAM,EAAsB;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;6BAAC;YACR,IAAI,CAAC,aAAa,OAAO,EAAE;YAC3B,IAAI,OAAO,OAAO,EAAE;YAEpB,+JAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;gBAC1B,SAAS,WAAW,OAAO,CAAC,OAAO;gBACnC,eAAe,WAAW,OAAO,CAAC,aAAa;gBAC/C,WAAW,WAAW,OAAO,CAAC,SAAS;YACzC;YAEA,OAAO,OAAO,GAAG,+JAAC,CAAC,GAAG,CAAC,aAAa,OAAO,EAAE;gBAC3C,QAAQ;gBACR,MAAM;gBACN,aAAa;gBACb,oBAAoB;gBACpB,iBAAiB;YACnB;YAEA,+JAAC,CAAC,SAAS,CAAC,iEAAiE;gBAC3E,aAAa;YACf,GAAG,KAAK,CAAC,OAAO,OAAO;YAEvB,WAAW,OAAO,GAAG,+JAAC,CAAC,UAAU,GAAG,KAAK,CAAC,OAAO,OAAO;YAExD,+JAAC,CAAC,MAAM,CAAC,gBAAgB;gBAAE,MAAM;YAAU,GAAG,KAAK,CAAC,WAAW,OAAO;YAEtE,YAAY;YAEZ;qCAAO;oBACL,WAAW,OAAO,EAAE;oBACpB,WAAW,OAAO,GAAG;oBACrB,OAAO,OAAO,EAAE;oBAChB,OAAO,OAAO,GAAG;gBACnB;;QACF;4BAAG,EAAE;IAEL,qBACE,6LAAC;QACC,WAAU;QACV,OACE;YACE,cAAc,GAAG,KAAK,GAAG,CAAC;YAC1B,eAAe;QACjB;;0BAGF,6LAAC;gBAAI,WAAU;gBAAoB,KAAK;;;;;;YACvC,CAAC,0BAAY,6LAAC;gBAAI,WAAU;0BAAe;;;;;;0BAE5C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;4BAAM;0CAEL,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,KAAI;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,QAAU,QAAQ,OAAO,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG1D,6LAAC;;4BAAM;0CAEL,6LAAC;gCACC,MAAK;gCACL,KAAI;gCACJ,KAAI;gCACJ,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,QAAU,SAAS,OAAO,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG3D,6LAAC;wBACC,MAAK;wBACL,SAAS;4BACP,QAAQ;4BACR,SAAS;wBACX;kCACD;;;;;;;;;;;;;;;;;;AAMT;GA5FwB;KAAA"}}]
}